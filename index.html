<html>
<head>
    <title>Jogo de AdivinhaÃ§Ã£o</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to right, #83a4d4, #b6fbff);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        h1 {
            color: #333;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 500px;
        }

        textarea {
            width: 100%;
            height: 180px;
            resize: none;
            padding: 10px;
            font-size: 14px;
            margin-top: 10px;
        }

        input[type="number"], input[type="text"] {
            padding: 5px;
            font-size: 16px;
        }

        button, select {
            padding: 6px 10px;
            font-size: 14px;
            margin-left: 10px;
            margin-top: 10px;
        }

        .input-group {
            margin-top: 15px;
        }

        .emoji {
            font-size: 48px;
            display: none;
            animation: explode 3s ease-in-out forwards;
        }

        #exportarResultado {
            display: none;
            margin-top: 15px;
        }

        @keyframes explode {
            0% { opacity: 0; transform: scale(0.5); }
            25% { opacity: 1; transform: scale(1.2); }
            50% { transform: scale(1.5); }
            100% { opacity: 0; transform: scale(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¯ Jogo de AdivinhaÃ§Ã£o</h1>
        <p>
            <strong>Dificuldade:</strong>
            <select id="seletorDificuldade" onchange="escolherDificuldade()">
                <option value="">Selecione...</option>
                <option value="1">1. FÃ¡cil (1 a 50, 10 tentativas)</option>
                <option value="2">2. MÃ©dio (1 a 90, 7 tentativas)</option>
                <option value="3">3. DifÃ­cil (1 a 150, 5 tentativas)</option>
                <option value="4">4. NÃ­vel Passos (1 a 200, 7 tentativas)</option>
                <option value="5">5. Boa Sorte (1 a 1000, 12 tentativas)</option>
            </select>
        </p>

        <div class="input-group">
            <strong>Seu palpite:</strong>
            <input type="number" id="inputPalpite">
            <button onclick="verificarPalpite()">Chutar</button>
            <button onclick="novoJogo()">Novo Jogo</button>
        </div>

        <textarea id="mensagens" readonly></textarea>
        <div id="fogos" class="emoji">ðŸŽ†ðŸŽ‡âœ¨</div>

        <div id="exportarResultado">
            <input type="text" id="nomeJogador" placeholder="Seu nome">
            <button onclick="exportarImagem()">Exportar Resultado</button>
        </div>

        <canvas id="canvasResultado" style="display: none;"></canvas>
    </div>

    <script>
        let maxNumero;
        let tentativas;
        let numeroAleatorio;
        let dificuldade;

        document.getElementById("inputPalpite").addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
                verificarPalpite();
            }
        });

        function escolherDificuldade() {
            const seletor = document.getElementById("seletorDificuldade");
            const valor = seletor.value;

            if (!valor) return;

            dificuldade = parseInt(valor);
            switch (dificuldade) {
                case 1: maxNumero = 50; tentativas = 10; break;
                case 2: maxNumero = 90; tentativas = 7; break;
                case 3: maxNumero = 150; tentativas = 5; break;
                case 4: maxNumero = 200; tentativas = 7; break;
                case 5: maxNumero = 1000; tentativas = 12; break;
            }
            novoJogo();
        }

        function novoJogo() {
            if (!dificuldade) return;
            numeroAleatorio = Math.floor(Math.random() * maxNumero) + 1;
            const mensagens = document.getElementById("mensagens");
            mensagens.value = `Adivinhe um nÃºmero entre 1 e ${maxNumero}.\nVocÃª tem ${tentativas} tentativas.\n`;
            document.getElementById("inputPalpite").disabled = false;
            document.getElementById("inputPalpite").focus();
            document.getElementById("exportarResultado").style.display = "none";
        }

        function verificarPalpite() {
            const input = document.getElementById("inputPalpite");
            const mensagens = document.getElementById("mensagens");
            const entrada = parseInt(input.value);

            if (entrada === 2000) {
                alert("VocÃª saiu do jogo.");
                return;
            }

            if (isNaN(entrada) || entrada < 1 || entrada > maxNumero) {
                mensagens.value = `Digite um nÃºmero entre 1 e ${maxNumero}.\n` + mensagens.value;
                return;
            }

            tentativas--;
            let novaMensagem = `VocÃª chutou ${entrada}.\n`;

            if (entrada === numeroAleatorio) {
                novaMensagem += "ðŸŽ‰ ParabÃ©ns! VocÃª acertou o nÃºmero!\n";
                input.disabled = true;
                mostrarFogos();
            } else {
                const diferenca = Math.abs(entrada - numeroAleatorio);
                if (diferenca <= 5) {
                    novaMensagem += "ðŸ”¥ Quente! EstÃ¡ muito perto.\n";
                } else if (diferenca <= 10) {
                    novaMensagem += "ðŸŒ¡ï¸ Morno! EstÃ¡ perto.\n";
                } else if (diferenca <= 20) {
                    novaMensagem += "ðŸ“‰ JÃ¡ esteve mais longe.\n";
                } else if (dificuldade === 5 && diferenca <= 50) {
                    novaMensagem += "ðŸ“ 50! Ainda longe.\n";
                } else {
                    novaMensagem += "â„ï¸ Frio! EstÃ¡ longe.\n";
                }

                novaMensagem += `Tentativas restantes: ${tentativas}\n`;

                if (tentativas === 0) {
                    novaMensagem += `ðŸ˜¢ VocÃª perdeu! O nÃºmero era: ${numeroAleatorio}\n`;
                    input.disabled = true;
                }
            }

            mensagens.value = novaMensagem + mensagens.value;
            input.value = "";
            input.focus();
        }

        function mostrarFogos() {
            const fogos = document.getElementById("fogos");
            fogos.style.display = "block";
            document.getElementById("exportarResultado").style.display = "block";
            setTimeout(() => {
                fogos.style.display = "none";
            }, 3000);
        }

        function exportarImagem() {
            const nome = document.getElementById("nomeJogador").value.trim();
            if (!nome) {
                alert("Digite seu nome antes de exportar!");
                return;
            }

            const canvas = document.getElementById("canvasResultado");
            const ctx = canvas.getContext("2d");
            canvas.width = 600;
            canvas.height = 300;

            const gradiente = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradiente.addColorStop(0, "#83a4d4");
            gradiente.addColorStop(1, "#b6fbff");
            ctx.fillStyle = gradiente;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = "#333";
            ctx.font = "bold 28px Segoe UI";
            ctx.fillText("ðŸŽ‰ ParabÃ©ns, " + nome + "!", 50, 80);

            ctx.font = "20px Segoe UI";
            ctx.fillText("VocÃª venceu o Jogo de AdivinhaÃ§Ã£o!", 50, 120);

            const dificuldades = {
                1: "FÃ¡cil (1 a 50)",
                2: "MÃ©dio (1 a 90)",
                3: "DifÃ­cil (1 a 150)",
                4: "NÃ­vel Passos (1 a 200)",
                5: "Boa Sorte (1 a 1000)"
            };

            const tentativasUsadas = getTentativasUsadas();

            ctx.fillText(`Dificuldade: ${dificuldades[dificuldade]}`, 50, 160);
            ctx.fillText(`Tentativas usadas: ${tentativasUsadas}`, 50, 190);

            const link = document.createElement("a");
            link.download = `resultado-${nome}.png`;
            link.href = canvas.toDataURL();
            link.click();
        }

        function getTentativasUsadas() {
            switch (dificuldade) {
                case 1: return 10 - tentativas;
                case 2: return 7 - tentativas;
                case 3: return 5 - tentativas;
                case 4: return 7 - tentativas;
                case 5: return 12 - tentativas;
            }
            return "?";
        }
    </script>
</body>
</html>
